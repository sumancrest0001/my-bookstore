{"ast":null,"code":"import _objectSpread from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import{storage,firestore}from'../../../firebase/index';import{createBook}from'../../../redux/actions/index';import'./BooksForm.scss';var BookForm=/*#__PURE__*/function(_Component){_inherits(BookForm,_Component);var _super=_createSuper(BookForm);function BookForm(props){var _this;_classCallCheck(this,BookForm);_this=_super.call(this,props);_this.handleChange=function(event){var book=_this.state.book;var updatedBook=book;updatedBook[event.target.id]=event.target.value;_this.setState({book:updatedBook});};_this.handleFileChange=function(event){if(event.target.files[0]){_this.setState({image:event.target.files[0]});}};_this.handleSubmit=function(){var image=_this.state.image;var uploadImage=storage.ref(\"images/\".concat(image.name)).put(image);uploadImage.on('state_changed',function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);_this.setState({progress:progress});},function(error){console.log(error);},function(){storage.ref('images').child(image.name).getDownloadURL().then(function(bookImageUrl){var book=_this.state.book;var updatedBook=_objectSpread({},book,{url:bookImageUrl,createdAt:new Date()});_this.setState({book:updatedBook});var collectionRef=firestore.collection('books');collectionRef.add(updatedBook);});});};_this.state={book:{isbn:'',title:'',description:'',category:'',author:'',publisher:'',price:'',status:'',url:''},image:'',progress:0};return _this;}_createClass(BookForm,[{key:\"render\",value:function render(){var _this$state=this.state,book=_this$state.book,progress=_this$state.progress;var isbn=book.isbn,title=book.title,description=book.description,category=book.category,author=book.author,publisher=book.publisher,price=book.price,status=book.status;var _this$props=this.props,categories=_this$props.categories,bookCondition=_this$props.bookCondition;return/*#__PURE__*/React.createElement(\"div\",{className:\"Form\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"Title\"},\"Add new to Bookstore\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"number\",id:\"isbn\",className:\"Input InputFields\",placeholder:\"ISBN number\",value:isbn,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{className:\"Input InputFields Text\",id:\"title\",placeholder:\"Enter Book Title\",type:\"text\",value:title,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"textarea\",id:\"description\",rows:\"5\",className:\"Input, InputFields, Text\",placeholder:\"Add short description\",value:description,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"select\",{className:\"Select, InputFields, classes.Text\",id:\"category\",value:category,onChange:this.handleChange},categories.map(function(option){return/*#__PURE__*/React.createElement(\"option\",{key:option,value:option},option);})),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"author\",className:\"Input InputFields Text\",placeholder:\"Author please\",value:author,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"publisher\",className:\"Input InputFields Text\",placeholder:\"Publishername\",value:publisher,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",step:\"0.01\",id:\"price\",className:\"Input InputFields Text\",placeholder:\"Enter price\",value:price,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"select\",{className:\"Select InputFields Text\",id:\"status\",value:status,onChange:this.handleChange},bookCondition.map(function(option){return/*#__PURE__*/React.createElement(\"option\",{key:option,value:option},option);})),/*#__PURE__*/React.createElement(\"progress\",{value:progress,max:\"100\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:this.handleFileChange,required:true}),/*#__PURE__*/React.createElement(\"button\",{className:\"Button SaveBtn\",type:\"button\",onClick:this.handleSubmit},\"SAVE BOOK\")));}}]);return BookForm;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addBook:function addBook(data){dispatch(createBook(data));}};};export default connect(null,mapDispatchToProps)(BookForm);","map":{"version":3,"sources":["/home/suman/react-projects/redux/my-bookstore/src/container/AdminContainers/BookForm/BooksForm.js"],"names":["React","Component","connect","storage","firestore","createBook","BookForm","props","handleChange","event","book","state","updatedBook","target","id","value","setState","handleFileChange","files","image","handleSubmit","uploadImage","ref","name","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","bookImageUrl","url","createdAt","Date","collectionRef","collection","add","isbn","title","description","category","author","publisher","price","status","categories","bookCondition","map","option","mapDispatchToProps","dispatch","addBook","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { storage, firestore } from '../../../firebase/index';\nimport { createBook } from '../../../redux/actions/index';\nimport './BooksForm.scss';\n\nclass BookForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      book: {\n        isbn: '',\n        title: '',\n        description: '',\n        category: '',\n        author: '',\n        publisher: '',\n        price: '',\n        status: '',\n        url: '',\n      },\n      image: '',\n      progress: 0,\n    };\n  }\n\n  handleChange = event => {\n    const { book } = this.state;\n    const updatedBook = book;\n    updatedBook[event.target.id] = event.target.value;\n    this.setState({ book: updatedBook });\n  };\n\n  handleFileChange = event => {\n    if (event.target.files[0]) {\n      this.setState({ image: event.target.files[0] });\n    }\n  };\n\n  handleSubmit = () => {\n    const { image } = this.state;\n    const uploadImage = storage.ref(`images/${image.name}`).put(image);\n    uploadImage.on('state_changed',\n      snapshot => {\n        const progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n        this.setState({ progress });\n      },\n      error => {\n        console.log(error);\n      },\n      () => {\n        storage.ref('images').child(image.name).getDownloadURL().then(bookImageUrl => {\n          const { book } = this.state;\n          const updatedBook = {\n            ...book,\n            url: bookImageUrl,\n            createdAt: new Date(),\n          };\n          this.setState({ book: updatedBook });\n          const collectionRef = firestore.collection('books');\n          collectionRef.add(updatedBook);\n        });\n      });\n  };\n\n  render() {\n    const { book, progress } = this.state;\n    const {\n      isbn, title, description, category, author, publisher, price, status,\n    } = book;\n    const { categories, bookCondition } = this.props;\n    return (\n      <div className=\"Form\">\n        <h3 className=\"Title\">Add new to Bookstore</h3>\n        <form>\n          <input\n            type=\"number\"\n            id=\"isbn\"\n            className=\"Input InputFields\"\n            placeholder=\"ISBN number\"\n            value={isbn}\n            onChange={this.handleChange}\n            required\n          />\n          <input\n            className=\"Input InputFields Text\"\n            id=\"title\"\n            placeholder=\"Enter Book Title\"\n            type=\"text\"\n            value={title}\n            onChange={this.handleChange}\n            required\n          />\n          <input\n            type=\"textarea\"\n            id=\"description\"\n            rows=\"5\"\n            className=\"Input, InputFields, Text\"\n            placeholder=\"Add short description\"\n            value={description}\n            onChange={this.handleChange}\n            required\n          />\n          <select\n            className=\"Select, InputFields, classes.Text\"\n            id=\"category\"\n            value={category}\n            onChange={this.handleChange}\n          >\n            {\n              categories.map(option => (\n                <option\n                  key={option}\n                  value={option}\n                >\n                  {option}\n                </option>\n              ))\n            }\n          </select>\n          <input\n            type=\"text\"\n            id=\"author\"\n            className=\"Input InputFields Text\"\n            placeholder=\"Author please\"\n            value={author}\n            onChange={this.handleChange}\n            required\n          />\n          <input\n            type=\"text\"\n            id=\"publisher\"\n            className=\"Input InputFields Text\"\n            placeholder=\"Publishername\"\n            value={publisher}\n            onChange={this.handleChange}\n            required\n          />\n          <input\n            type=\"number\"\n            step=\"0.01\"\n            id=\"price\"\n            className=\"Input InputFields Text\"\n            placeholder=\"Enter price\"\n            value={price}\n            onChange={this.handleChange}\n            required\n          />\n          <select\n            className=\"Select InputFields Text\"\n            id=\"status\"\n            value={status}\n            onChange={this.handleChange}\n          >\n            {\n              bookCondition.map(option => (\n                <option\n                  key={option}\n                  value={option}\n                >\n                  {option}\n                </option>\n              ))\n            }\n          </select>\n          <progress value={progress} max=\"100\" />\n          <input\n            type=\"file\"\n            onChange={this.handleFileChange}\n            required\n          />\n          <button\n            className=\"Button SaveBtn\"\n            type=\"button\"\n            onClick={this.handleSubmit}\n          >\n            SAVE BOOK\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addBook: data => { dispatch(createBook(data)); },\n});\n\nBookForm.propTypes = {\n  addBook: PropTypes.func.isRequired,\n  categories: PropTypes.instanceOf(Array).isRequired,\n  bookCondition: PropTypes.instanceOf(Array).isRequired,\n};\n\nexport default connect(null, mapDispatchToProps)(BookForm);\n"]},"metadata":{},"sourceType":"module"}