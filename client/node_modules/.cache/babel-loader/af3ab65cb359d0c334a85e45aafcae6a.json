{"ast":null,"code":"import _regeneratorRuntime from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/suman/react-projects/redux/my-bookstore/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Route,Switch}from'react-router-dom';import{connect}from'react-redux';import HomePage from'./container/HomePage/HomePage';import AdminMainContainer from'./container/AdminContainers/AdminMainContainer/AdminMainContainer';import Header from'./components/Header/Header';import Signin from'./components/Auth/Signin/Signin';import Signup from'./components/Auth/Signup/Signup';import Logout from'./components/Auth/Logout/Logout';import CheckoutPage from'./components/CheckoutPage/CheckoutPage';import{auth,createUserProfileDocument}from'./firebase/index';import{setCurrentUser as _setCurrentUser}from'./redux/actions/user.actions';import'./App.scss';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unSubscribeFromAuth=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unSubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=7;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShot){var result=snapShot.data().email==='suman.crest0001@gmail.com';var currentUser=_objectSpread({id:snapShot.id},snapShot.data());setCurrentUser(currentUser,result);});_context.next=8;break;case 7:setCurrentUser(userAuth,false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unSubscribeFromAuth();}},{key:\"render\",value:function render(){var adminStatus=this.props.adminStatus;console.log(adminStatus);return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,{hideNewBook:adminStatus}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/signin\",exact:true,component:Signin}),/*#__PURE__*/React.createElement(Route,{path:\"/register\",exact:true,component:Signup}),/*#__PURE__*/React.createElement(Route,{path:\"/logout\",exact:true,component:Logout}),adminStatus?/*#__PURE__*/React.createElement(Route,{path:\"/auth\",component:AdminMainContainer}):null,/*#__PURE__*/React.createElement(Route,{path:\"/\",exact:true,component:HomePage}),/*#__PURE__*/React.createElement(Route,{path:\"/checkout\",component:CheckoutPage})));}}]);return App;}(Component);var mapStateToProps=function mapStateToProps(state){return{adminStatus:state.user.admin};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user,admin){return dispatch(_setCurrentUser(user,admin));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/suman/react-projects/redux/my-bookstore/src/App.js"],"names":["React","Component","Route","Switch","connect","HomePage","AdminMainContainer","Header","Signin","Signup","Logout","CheckoutPage","auth","createUserProfileDocument","setCurrentUser","App","unSubscribeFromAuth","props","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","result","data","email","currentUser","id","adminStatus","console","log","mapStateToProps","state","user","admin","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Route, Switch,\n} from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport HomePage from './container/HomePage/HomePage';\nimport AdminMainContainer from './container/AdminContainers/AdminMainContainer/AdminMainContainer';\nimport Header from './components/Header/Header';\nimport Signin from './components/Auth/Signin/Signin';\nimport Signup from './components/Auth/Signup/Signup';\nimport Logout from './components/Auth/Logout/Logout';\nimport CheckoutPage from './components/CheckoutPage/CheckoutPage';\nimport { auth, createUserProfileDocument } from './firebase/index';\nimport { setCurrentUser } from './redux/actions/user.actions';\nimport './App.scss';\n\nclass App extends Component {\n  unSubscribeFromAuth = null;\n\n  componentDidMount() {\n    const { setCurrentUser } = this.props;\n    this.unSubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot(snapShot => {\n          const result = snapShot.data().email === 'suman.crest0001@gmail.com';\n          const currentUser = {\n            id: snapShot.id,\n            ...snapShot.data(),\n          };\n          setCurrentUser(currentUser, result);\n        });\n      } else {\n        setCurrentUser(userAuth, false);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.unSubscribeFromAuth();\n  }\n\n  render() {\n    const { adminStatus } = this.props;\n    console.log(adminStatus);\n    return (\n      <div className=\"App\">\n        <Header hideNewBook={adminStatus} />\n        <Switch>\n          <Route path=\"/signin\" exact component={Signin} />\n          <Route path=\"/register\" exact component={Signup} />\n          <Route path=\"/logout\" exact component={Logout} />\n          {\n            adminStatus ? <Route path=\"/auth\" component={AdminMainContainer} /> : null\n          }\n          <Route path=\"/\" exact component={HomePage} />\n          <Route path=\"/checkout\" component={CheckoutPage} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  adminStatus: state.user.admin,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: (user, admin) => dispatch(setCurrentUser(user, admin)),\n});\n\nApp.propTypes = {\n  setCurrentUser: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}